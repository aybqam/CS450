Certainly! Here's the updated full code using pure JavaScript:

1. HTML code:
```html
<!DOCTYPE html>
<html>
<head>
    <title>Button Icon Change</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">
</head>
<body>
    <button id="myButton"><i id="icon" class="fas fa-play"></i></button>

    <script>
        document.addEventListener("DOMContentLoaded", function() {
            var currentState = "<?php echo $currentState; ?>";
            var icon = document.getElementById("icon");

            if (currentState == "pause") {
                icon.classList.remove("fa-play");
                icon.classList.add("fa-pause");
            }

            document.getElementById("myButton").addEventListener("click", function() {
                var xhr = new XMLHttpRequest();
                xhr.open("POST", "update_state.php", true);
                xhr.onload = function() {
                    if (xhr.readyState === 4 && xhr.status === 200) {
                        icon.classList.toggle("fa-play");
                        icon.classList.toggle("fa-pause");
                    } else {
                        alert("An error occurred.");
                    }
                };
                xhr.send();
            });
        });
    </script>
</body>
</html>
```

2. PHP code (update_state.php):
```php
<?php
// Establish connection to MySQL database
$servername = "localhost";
$username = "your_username";
$password = "your_password";
$dbname = "your_database";

$conn = new mysqli($servername, $username, $password, $dbname);

// Check connection
if ($conn->connect_error) {
    die("Connection failed: " . $conn->connect_error);
}

// Retrieve the current state of the button from the database
$sql = "SELECT state FROM button_state";
$result = $conn->query($sql);
$row = $result->fetch_assoc();
$currentState = $row["state"];

// Update the state in the database when the button is clicked
if ($_SERVER["REQUEST_METHOD"] == "POST") {
    $newState = ($currentState == "play") ? "pause" : "play";
    $sql = "UPDATE button_state SET state='$newState'";
    $conn->query($sql);
}

$conn->close();
?>
```

3. PHP code (create_table.php):
```php
<?php
// Establish connection to MySQL database
$servername = "localhost";
$username = "your_username";
$password = "your_password";
$dbname = "your_database";

$conn = new mysqli($servername, $username, $password, $dbname);

// Check connection
if ($conn->connect_error) {
    die("Connection failed: " . $conn->connect_error);
}

// Create table
$sql = "CREATE TABLE IF NOT EXISTS button_state (
    id INT(11) AUTO_INCREMENT PRIMARY KEY,
    state VARCHAR(10) NOT NULL
)";
$conn->query($sql);

// Insert initial state
$sql = "INSERT INTO button_state (state) VALUES ('play')";
$conn->query($sql);

$conn->close();
?>
```

Remember to replace "your_username", "your_password", and "your_database" with the appropriate values for your MySQL database.

To set up the database table and initial state, run the "create_table.php" script once. This will create the "button_state" table and insert an initial state value of "play".

After the table is created and the initial state is inserted, you can run the main HTML file, which will handle the icon change when the button is clicked.

Note: Ensure that you have the necessary permissions and access to create tables and execute PHP scripts on your server.
